/*
* jQuery Form Plugin
* version: 3.09 (16-APR-2012)
* @requires jQuery v1.3.2 or later
*
* Examples and documentation at: http://malsup.com/jquery/form/
* Project repository: https://github.com/malsup/form
* Dual licensed under the MIT and GPL licenses:
*    http://malsup.github.com/mit-license.txt
*    http://malsup.github.com/gpl-license-v2.txt
*/
(function(a){var d={};
d.fileapi=a("<input type='file'/>").get(0).files!==undefined;
d.formdata=window.FormData!==undefined;
a.fn.ajaxSubmit=function(w){if(!this.length){e("ajaxSubmit: skipping submit process - no element selected");
return this
}var s,h,B,f=this;
if(typeof w=="function"){w={success:w}
}s=this.attr("method");
h=this.attr("action");
B=(typeof h==="string")?a.trim(h):"";
B=B||window.location.href||"";
if(B){B=(B.match(/^([^#]+)/)||[])[1]
}w=a.extend(true,{url:B,success:a.ajaxSettings.success,type:s||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},w);
var C={};
this.trigger("form-pre-serialize",[this,w,C]);
if(C.veto){e("ajaxSubmit: submit vetoed via form-pre-serialize trigger");
return this
}if(w.beforeSerialize&&w.beforeSerialize(this,w)===false){e("ajaxSubmit: submit aborted via beforeSerialize callback");
return this
}var A=w.traditional;
if(A===undefined){A=a.ajaxSettings.traditional
}var j=[];
var y,g=this.formToArray(w.semantic,j);
if(w.data){w.extraData=w.data;
y=a.param(w.data,A)
}if(w.beforeSubmit&&w.beforeSubmit(g,this,w)===false){e("ajaxSubmit: submit aborted via beforeSubmit callback");
return this
}this.trigger("form-submit-validate",[g,this,w,C]);
if(C.veto){e("ajaxSubmit: submit vetoed via form-submit-validate trigger");
return this
}var x=a.param(g,A);
if(y){x=(x?(x+"&"+y):y)
}if(w.type.toUpperCase()=="GET"){w.url+=(w.url.indexOf("?")>=0?"&":"?")+x;
w.data=null
}else{w.data=x
}var i=[];
if(w.resetForm){i.push(function(){f.resetForm()
})
}if(w.clearForm){i.push(function(){f.clearForm(w.includeHidden)
})
}if(!w.dataType&&w.target){var v=w.success||function(){};
i.push(function(k){var q=w.replaceTarget?"replaceWith":"html";
a(w.target)[q](k).each(v,arguments)
})
}else{if(w.success){i.push(w.success)
}}w.success=function(q,F,G){var k=w.context||w;
for(var D=0,E=i.length;
D<E;
D++){i[D].apply(k,[q,F,G||f,f])
}};
var m=a("input:file:enabled[value]",this);
var p=m.length>0;
var t="multipart/form-data";
var u=(f.attr("enctype")==t||f.attr("encoding")==t);
var l=d.fileapi&&d.formdata;
e("fileAPI :"+l);
var z=(p||u)&&!l;
if(w.iframe!==false&&(w.iframe||z)){if(w.closeKeepAlive){a.get(w.closeKeepAlive,function(){n(g)
})
}else{n(g)
}}else{if((p||u)&&l){o(g)
}else{a.ajax(w)
}}for(var r=0;
r<j.length;
r++){j[r]=null
}this.trigger("form-submit-notify",[this,w]);
return this;
function o(k){var D=new FormData();
for(var E=0;
E<k.length;
E++){D.append(k[E].name,k[E].value)
}if(w.extraData){for(var F in w.extraData){if(w.extraData.hasOwnProperty(F)){D.append(F,w.extraData[F])
}}}w.data=null;
var G=a.extend(true,{},a.ajaxSettings,w,{contentType:false,processData:false,cache:false,type:"POST"});
if(w.uploadProgress){G.xhr=function(){var H=jQuery.ajaxSettings.xhr();
if(H.upload){H.upload.onprogress=function(I){var J=0;
var K=I.loaded||I.position;
var L=I.total;
if(I.lengthComputable){J=Math.ceil(K/L*100)
}w.uploadProgress(I,K,L,J)
}
}return H
}
}G.data=null;
var q=G.beforeSend;
G.beforeSend=function(I,H){H.data=D;
if(q){q.call(H,I,w)
}};
a.ajax(G)
}function n(q){var N=f[0],M,R,W,O,S,k,T,ad,Y,U,Z,aa;
var ac=!!a.fn.prop;
if(a(":input[name=submit],:input[id=submit]",N).length){alert('Error: Form elements must not have name or id of "submit".');
return
}if(q){for(R=0;
R<j.length;
R++){M=a(j[R]);
if(ac){M.prop("disabled",false)
}else{M.removeAttr("disabled")
}}}W=a.extend(true,{},a.ajaxSettings,w);
W.context=W.context||W;
S="jqFormIO"+(new Date().getTime());
if(W.iframeTarget){k=a(W.iframeTarget);
U=k.attr("name");
if(!U){k.attr("name",S)
}else{S=U
}}else{k=a('<iframe name="'+S+'" src="'+W.iframeSrc+'" />');
k.css({position:"absolute",top:"-1000px",left:"-1000px"})
}T=k[0];
ad={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(af){var ae=(af==="timeout"?"timeout":"aborted");
e("aborting upload... "+ae);
this.aborted=1;
k.attr("src",W.iframeSrc);
ad.error=ae;
if(W.error){W.error.call(W.context,ad,ae,af)
}if(O){a.event.trigger("ajaxError",[ad,W,ae])
}if(W.complete){W.complete.call(W.context,ad,ae)
}}};
O=W.global;
if(O&&0===a.active++){a.event.trigger("ajaxStart")
}if(O){a.event.trigger("ajaxSend",[ad,W])
}if(W.beforeSend&&W.beforeSend.call(W.context,ad,W)===false){if(W.global){a.active--
}return
}if(ad.aborted){return
}Y=N.clk;
if(Y){U=Y.name;
if(U&&!Y.disabled){W.extraData=W.extraData||{};
W.extraData[U]=Y.value;
if(Y.type=="image"){W.extraData[U+".x"]=N.clk_x;
W.extraData[U+".y"]=N.clk_y
}}}var F=1;
var X=2;
function P(af){var ae=af.contentWindow?af.contentWindow.document:af.contentDocument?af.contentDocument:af.document;
return ae
}var H=a("meta[name=csrf-token]").attr("content");
var G=a("meta[name=csrf-param]").attr("content");
if(G&&H){W.extraData=W.extraData||{};
W.extraData[G]=H
}function L(){var ai=f.attr("target"),ae=f.attr("action");
N.setAttribute("target",S);
if(!s){N.setAttribute("method","POST")
}if(ae!=W.url){N.setAttribute("action",W.url)
}if(!W.skipEncodingOverride&&(!s||/post/i.test(s))){f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})
}if(W.timeout){aa=setTimeout(function(){Z=true;
E(F)
},W.timeout)
}function af(){try{var ak=P(T).readyState;
e("state = "+ak);
if(ak&&ak.toLowerCase()=="uninitialized"){setTimeout(af,50)
}}catch(aj){e("Server abort: ",aj," (",aj.name,")");
E(X);
if(aa){clearTimeout(aa)
}aa=undefined
}}var ag=[];
try{if(W.extraData){for(var ah in W.extraData){if(W.extraData.hasOwnProperty(ah)){ag.push(a('<input type="hidden" name="'+ah+'">').attr("value",W.extraData[ah]).appendTo(N)[0])
}}}if(!W.iframeTarget){k.appendTo("body");
if(T.attachEvent){T.attachEvent("onload",E)
}else{T.addEventListener("load",E,false)
}}setTimeout(af,15);
N.submit()
}finally{N.setAttribute("action",ae);
if(ai){N.setAttribute("target",ai)
}else{f.removeAttr("target")
}a(ag).remove()
}}if(W.forceSync){L()
}else{setTimeout(L,10)
}var I,J,K=50,D;
function E(ah){if(ad.aborted||D){return
}try{J=P(T)
}catch(aj){e("cannot access response document: ",aj);
ah=X
}if(ah===F&&ad){ad.abort("timeout");
return
}else{if(ah==X&&ad){ad.abort("server abort");
return
}}if(!J||J.location.href==W.iframeSrc){if(!Z){return
}}if(T.detachEvent){T.detachEvent("onload",E)
}else{T.removeEventListener("load",E,false)
}var an="success",ai;
try{if(Z){throw"timeout"
}var ak=W.dataType=="xml"||J.XMLDocument||a.isXMLDoc(J);
e("isXml="+ak);
if(!ak&&window.opera&&(J.body===null||!J.body.innerHTML)){if(--K){e("requeing onLoad callback, DOM not available");
setTimeout(E,250);
return
}}var af=J.body?J.body:J.documentElement;
ad.responseText=af?af.innerHTML:null;
ad.responseXML=J.XMLDocument?J.XMLDocument:J;
if(ak){W.dataType="xml"
}ad.getResponseHeader=function(ap){var aq={"content-type":W.dataType};
return aq[ap]
};
if(af){ad.status=Number(af.getAttribute("status"))||ad.status;
ad.statusText=af.getAttribute("statusText")||ad.statusText
}var ag=(W.dataType||"").toLowerCase();
var am=/(json|script|text)/.test(ag);
if(am||W.textarea){var ao=J.getElementsByTagName("textarea")[0];
if(ao){ad.responseText=ao.value;
ad.status=Number(ao.getAttribute("status"))||ad.status;
ad.statusText=ao.getAttribute("statusText")||ad.statusText
}else{if(am){var al=J.getElementsByTagName("pre")[0];
var ae=J.getElementsByTagName("body")[0];
if(al){ad.responseText=al.textContent?al.textContent:al.innerText
}else{if(ae){ad.responseText=ae.textContent?ae.textContent:ae.innerText
}}}}}else{if(ag=="xml"&&!ad.responseXML&&ad.responseText){ad.responseXML=ab(ad.responseText)
}}try{I=Q(ad,ag,W)
}catch(ah){an="parsererror";
ad.error=ai=(ah||an)
}}catch(ah){e("error caught: ",ah);
an="error";
ad.error=ai=(ah||an)
}if(ad.aborted){e("upload aborted");
an=null
}if(ad.status){an=(ad.status>=200&&ad.status<300||ad.status===304)?"success":"error"
}if(an==="success"){if(W.success){W.success.call(W.context,I,"success",ad)
}if(O){a.event.trigger("ajaxSuccess",[ad,W])
}}else{if(an){if(ai===undefined){ai=ad.statusText
}if(W.error){W.error.call(W.context,ad,an,ai)
}if(O){a.event.trigger("ajaxError",[ad,W,ai])
}}}if(O){a.event.trigger("ajaxComplete",[ad,W])
}if(O&&!--a.active){a.event.trigger("ajaxStop")
}if(W.complete){W.complete.call(W.context,ad,an)
}D=true;
if(W.timeout){clearTimeout(aa)
}setTimeout(function(){if(!W.iframeTarget){k.remove()
}ad.responseXML=null
},100)
}var ab=a.parseXML||function(af,ae){if(window.ActiveXObject){ae=new ActiveXObject("Microsoft.XMLDOM");
ae.async="false";
ae.loadXML(af)
}else{ae=(new DOMParser()).parseFromString(af,"text/xml")
}return(ae&&ae.documentElement&&ae.documentElement.nodeName!="parsererror")?ae:null
};
var V=a.parseJSON||function(ae){return window["eval"]("("+ae+")")
};
var Q=function(ai,ah,ag){var ae=ai.getResponseHeader("content-type")||"",aj=ah==="xml"||!ah&&ae.indexOf("xml")>=0,af=aj?ai.responseXML:ai.responseText;
if(aj&&af.documentElement.nodeName==="parsererror"){if(a.error){a.error("parsererror")
}}if(ag&&ag.dataFilter){af=ag.dataFilter(af,ah)
}if(typeof af==="string"){if(ah==="json"||!ah&&ae.indexOf("json")>=0){af=V(af)
}else{if(ah==="script"||!ah&&ae.indexOf("javascript")>=0){a.globalEval(af)
}}}return af
}
}};
a.fn.ajaxForm=function(g){g=g||{};
g.delegation=g.delegation&&a.isFunction(a.fn.on);
if(!g.delegation&&this.length===0){var f={s:this.selector,c:this.context};
if(!a.isReady&&f.s){e("DOM not ready, queuing ajaxForm");
a(function(){a(f.s,f.c).ajaxForm(g)
});
return this
}e("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)"));
return this
}if(g.delegation){a(document).off("submit.form-plugin",this.selector,c).off("click.form-plugin",this.selector,b).on("submit.form-plugin",this.selector,g,c).on("click.form-plugin",this.selector,g,b);
return this
}return this.ajaxFormUnbind().bind("submit.form-plugin",g,c).bind("click.form-plugin",g,b)
};
function c(f){var g=f.data;
if(!f.isDefaultPrevented()){f.preventDefault();
a(this).ajaxSubmit(g)
}}function b(g){var k=g.target;
var f=a(k);
if(!(f.is(":submit,input:image"))){var j=f.closest(":submit");
if(j.length===0){return
}k=j[0]
}var h=this;
h.clk=k;
if(k.type=="image"){if(g.offsetX!==undefined){h.clk_x=g.offsetX;
h.clk_y=g.offsetY
}else{if(typeof a.fn.offset=="function"){var i=f.offset();
h.clk_x=g.pageX-i.left;
h.clk_y=g.pageY-i.top
}else{h.clk_x=g.pageX-k.offsetLeft;
h.clk_y=g.pageY-k.offsetTop
}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null
},100)
}a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")
};
a.fn.formToArray=function(w,k){var g=[];
if(this.length===0){return g
}var o=this[0];
var l=w?o.getElementsByTagName("*"):o.elements;
if(!l){return g
}var p,r,u,x,h,t,s;
for(p=0,t=l.length;
p<t;
p++){h=l[p];
u=h.name;
if(!u){continue
}if(w&&o.clk&&h.type=="image"){if(!h.disabled&&o.clk==h){g.push({name:u,value:a(h).val(),type:h.type});
g.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y})
}continue
}x=a.fieldValue(h,true);
if(x&&x.constructor==Array){if(k){k.push(h)
}for(r=0,s=x.length;
r<s;
r++){g.push({name:u,value:x[r]})
}}else{if(d.fileapi&&h.type=="file"&&!h.disabled){if(k){k.push(h)
}var m=h.files;
if(m.length){for(r=0;
r<m.length;
r++){g.push({name:u,value:m[r],type:h.type})
}}else{g.push({name:u,value:"",type:h.type})
}}else{if(x!==null&&typeof x!="undefined"){if(k){k.push(h)
}g.push({name:u,value:x,type:h.type,required:h.required})
}}}}if(!w&&o.clk){var f=a(o.clk),q=f[0];
u=q.name;
if(u&&!q.disabled&&q.type=="image"){g.push({name:u,value:f.val()});
g.push({name:u+".x",value:o.clk_x},{name:u+".y",value:o.clk_y})
}}return g
};
a.fn.formSerialize=function(f){return a.param(this.formToArray(f))
};
a.fn.fieldSerialize=function(g){var f=[];
this.each(function(){var k=this.name;
if(!k){return
}var l=a.fieldValue(this,g);
if(l&&l.constructor==Array){for(var h=0,j=l.length;
h<j;
h++){f.push({name:k,value:l[h]})
}}else{if(l!==null&&typeof l!="undefined"){f.push({name:this.name,value:l})
}}});
return a.param(f)
};
a.fn.fieldValue=function(j){for(var l=[],g=0,h=this.length;
g<h;
g++){var f=this[g];
var k=a.fieldValue(f,j);
if(k===null||typeof k=="undefined"||(k.constructor==Array&&!k.length)){continue
}if(k.constructor==Array){a.merge(l,k)
}else{l.push(k)
}}return l
};
a.fieldValue=function(g,q){var l=g.name,r=g.type,s=g.tagName.toLowerCase();
if(q===undefined){q=true
}if(q&&(!l||g.disabled||r=="reset"||r=="button"||(r=="checkbox"||r=="radio")&&!g.checked||(r=="submit"||r=="image")&&g.form&&g.form.clk!=g||s=="select"&&g.selectedIndex==-1)){return null
}if(s=="select"){var j=g.selectedIndex;
if(j<0){return null
}var f=[],p=g.options;
var m=(r=="select-one");
var k=(m?j+1:p.length);
for(var h=(m?j:0);
h<k;
h++){var o=p[h];
if(o.selected){var u=o.value;
if(!u){u=(o.attributes&&o.attributes.value&&!(o.attributes.value.specified))?o.text:o.value
}if(m){return u
}f.push(u)
}}return f
}return a(g).val()
};
a.fn.clearForm=function(f){return this.each(function(){a("input,select,textarea",this).clearFields(f)
})
};
a.fn.clearFields=a.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var h=this.type,i=this.tagName.toLowerCase();
if(g.test(h)||i=="textarea"){this.value=""
}else{if(h=="checkbox"||h=="radio"){this.checked=false
}else{if(i=="select"){this.selectedIndex=-1
}else{if(f){if((f===true&&/hidden/.test(h))||(typeof f=="string"&&a(this).is(f))){this.value=""
}}}}}})
};
a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()
}})
};
a.fn.enable=function(f){if(f===undefined){f=true
}return this.each(function(){this.disabled=!f
})
};
a.fn.selected=function(f){if(f===undefined){f=true
}return this.each(function(){var h=this.type;
if(h=="checkbox"||h=="radio"){this.checked=f
}else{if(this.tagName.toLowerCase()=="option"){var g=a(this).parent("select");
if(f&&g[0]&&g[0].type=="select-one"){g.find("option").selected(false)
}this.selected=f
}}})
};
a.fn.ajaxSubmit.debug=false;
function e(){if(!a.fn.ajaxSubmit.debug){return
}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");
if(window.console&&window.console.log){window.console.log(f)
}else{if(window.opera&&window.opera.postError){window.opera.postError(f)
}}}})(jQuery);