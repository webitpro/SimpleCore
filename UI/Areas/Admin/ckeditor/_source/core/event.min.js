if(!CKEDITOR.event){CKEDITOR.event=function(){};CKEDITOR.event.implementOn=function(targetObject){var eventProto=CKEDITOR.event.prototype;for(var prop in eventProto)if(targetObject[prop]==undefined)targetObject[prop]=eventProto[prop]};CKEDITOR.event.prototype=function(){var getPrivate=function(obj){var _=obj.getPrivate&&obj.getPrivate()||obj._||(obj._={});return _.events||(_.events={})};var eventEntry=function(eventName){this.name=eventName;this.listeners=[]};eventEntry.prototype={getListenerIndex:function(listenerFunction){for(var i=
0,listeners=this.listeners;i<listeners.length;i++)if(listeners[i].fn==listenerFunction)return i;return-1}};return{on:function(eventName,listenerFunction,scopeObj,listenerData,priority){var events=getPrivate(this),event=events[eventName]||(events[eventName]=new eventEntry(eventName));if(event.getListenerIndex(listenerFunction)<0){var listeners=event.listeners;if(!scopeObj)scopeObj=this;if(isNaN(priority))priority=10;var me=this;var listenerFirer=function(editor,publisherData,stopFn,cancelFn){var ev=
{name:eventName,sender:this,editor:editor,data:publisherData,listenerData:listenerData,stop:stopFn,cancel:cancelFn,removeListener:function(){me.removeListener(eventName,listenerFunction)}};listenerFunction.call(scopeObj,ev);return ev.data};listenerFirer.fn=listenerFunction;listenerFirer.priority=priority;for(var i=listeners.length-1;i>=0;i--)if(listeners[i].priority<=priority){listeners.splice(i+1,0,listenerFirer);return}listeners.unshift(listenerFirer)}},fire:function(){var stopped=false;var stopEvent=
function(){stopped=true};var canceled=false;var cancelEvent=function(){canceled=true};return function(eventName,data,editor){var event=getPrivate(this)[eventName];var previousStopped=stopped,previousCancelled=canceled;stopped=canceled=false;if(event){var listeners=event.listeners;if(listeners.length){listeners=listeners.slice(0);for(var i=0;i<listeners.length;i++){var retData=listeners[i].call(this,editor,data,stopEvent,cancelEvent);if(typeof retData!="undefined")data=retData;if(stopped||canceled)break}}}var ret=
canceled||(typeof data=="undefined"?false:data);stopped=previousStopped;canceled=previousCancelled;return ret}}(),fireOnce:function(eventName,data,editor){var ret=this.fire(eventName,data,editor);delete getPrivate(this)[eventName];return ret},removeListener:function(eventName,listenerFunction){var event=getPrivate(this)[eventName];if(event){var index=event.getListenerIndex(listenerFunction);if(index>=0)event.listeners.splice(index,1)}},hasListeners:function(eventName){var event=getPrivate(this)[eventName];
return event&&event.listeners.length>0}}}()};