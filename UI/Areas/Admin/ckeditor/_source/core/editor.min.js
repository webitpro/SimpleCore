(function(){var nameCounter=0;var getNewName=function(){var name="editor"+ ++nameCounter;return CKEDITOR.instances&&CKEDITOR.instances[name]?getNewName():name};var loadConfigLoaded={};var loadConfig=function(editor){var customConfig=editor.config.customConfig;if(!customConfig)return false;customConfig=CKEDITOR.getUrl(customConfig);var loadedConfig=loadConfigLoaded[customConfig]||(loadConfigLoaded[customConfig]={});if(loadedConfig.fn){loadedConfig.fn.call(editor,editor.config);if(CKEDITOR.getUrl(editor.config.customConfig)==
customConfig||!loadConfig(editor))editor.fireOnce("customConfigLoaded")}else CKEDITOR.scriptLoader.load(customConfig,function(){if(CKEDITOR.editorConfig)loadedConfig.fn=CKEDITOR.editorConfig;else loadedConfig.fn=function(){};loadConfig(editor)});return true};var initConfig=function(editor,instanceConfig){editor.on("customConfigLoaded",function(){if(instanceConfig){if(instanceConfig.on)for(var eventName in instanceConfig.on)editor.on(eventName,instanceConfig.on[eventName]);CKEDITOR.tools.extend(editor.config,
instanceConfig,true);delete editor.config.on}onConfigLoaded(editor)});if(instanceConfig&&instanceConfig.customConfig!=undefined)editor.config.customConfig=instanceConfig.customConfig;if(!loadConfig(editor))editor.fireOnce("customConfigLoaded")};var onConfigLoaded=function(editor){var skin=editor.config.skin.split(","),skinName=skin[0],skinPath=CKEDITOR.getUrl(skin[1]||"_source/"+"skins/"+skinName+"/");editor.skinName=skinName;editor.skinPath=skinPath;editor.skinClass="cke_skin_"+skinName;editor.tabIndex=
editor.config.tabIndex||editor.element.getAttribute("tabindex")||0;editor.readOnly=!!(editor.config.readOnly||editor.element.getAttribute("disabled"));editor.fireOnce("configLoaded");loadSkin(editor)};var loadLang=function(editor){CKEDITOR.lang.load(editor.config.language,editor.config.defaultLanguage,function(languageCode,lang){editor.langCode=languageCode;editor.lang=CKEDITOR.tools.prototypedCopy(lang);if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&editor.lang.dir=="rtl")editor.lang.dir="ltr";
editor.fire("langLoaded");var config=editor.config;config.contentsLangDirection=="ui"&&(config.contentsLangDirection=editor.lang.dir);loadPlugins(editor)})};var loadPlugins=function(editor){var config=editor.config,plugins=config.plugins,extraPlugins=config.extraPlugins,removePlugins=config.removePlugins;if(extraPlugins){var removeRegex=new RegExp("(?:^|,)(?:"+extraPlugins.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");plugins=plugins.replace(removeRegex,"");plugins+=","+extraPlugins}if(removePlugins){removeRegex=
new RegExp("(?:^|,)(?:"+removePlugins.replace(/\s*,\s*/g,"|")+")(?=,|$)","g");plugins=plugins.replace(removeRegex,"")}CKEDITOR.env.air&&(plugins+=",adobeair");CKEDITOR.plugins.load(plugins.split(","),function(plugins){var pluginsArray=[];var languageCodes=[];var languageFiles=[];editor.plugins=plugins;for(var pluginName in plugins){var plugin=plugins[pluginName],pluginLangs=plugin.lang,pluginPath=CKEDITOR.plugins.getPath(pluginName),lang=null;plugin.path=pluginPath;if(pluginLangs){lang=CKEDITOR.tools.indexOf(pluginLangs,
editor.langCode)>=0?editor.langCode:pluginLangs[0];if(!plugin.langEntries||!plugin.langEntries[lang])languageFiles.push(CKEDITOR.getUrl(pluginPath+"lang/"+lang+".js"));else{CKEDITOR.tools.extend(editor.lang,plugin.langEntries[lang]);lang=null}}languageCodes.push(lang);pluginsArray.push(plugin)}CKEDITOR.scriptLoader.load(languageFiles,function(){var methods=["beforeInit","init","afterInit"];for(var m=0;m<methods.length;m++)for(var i=0;i<pluginsArray.length;i++){var plugin=pluginsArray[i];if(m===0&&
languageCodes[i]&&plugin.lang)CKEDITOR.tools.extend(editor.lang,plugin.langEntries[languageCodes[i]]);if(plugin[methods[m]])plugin[methods[m]](editor)}editor.fire("pluginsLoaded");loadTheme(editor)})})};var loadSkin=function(editor){CKEDITOR.skins.load(editor,"editor",function(){loadLang(editor)})};var loadTheme=function(editor){var theme=editor.config.theme;CKEDITOR.themes.load(theme,function(){var editorTheme=editor.theme=CKEDITOR.themes.get(theme);editorTheme.path=CKEDITOR.themes.getPath(theme);
editorTheme.build(editor);if(editor.config.autoUpdateElement)attachToForm(editor)})};var attachToForm=function(editor){var element=editor.element;if(editor.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&element.is("textarea")){var form=element.$.form&&new CKEDITOR.dom.element(element.$.form);if(form){function onSubmit(){editor.updateElement()}form.on("submit",onSubmit);if(!form.$.submit.nodeName&&!form.$.submit.length)form.$.submit=CKEDITOR.tools.override(form.$.submit,function(originalSubmit){return function(){editor.updateElement();
if(originalSubmit.apply)originalSubmit.apply(this,arguments);else originalSubmit()}});editor.on("destroy",function(){form.removeListener("submit",onSubmit)})}}};function updateCommands(){var command,commands=this._.commands,mode=this.mode;if(!mode)return;for(var name in commands){command=commands[name];command[command.startDisabled?"disable":this.readOnly&&!command.readOnly?"disable":command.modes[mode]?"enable":"disable"]()}}CKEDITOR.editor.prototype._init=function(){var element=CKEDITOR.dom.element.get(this._.element),
instanceConfig=this._.instanceConfig;delete this._.element;delete this._.instanceConfig;this._.commands={};this._.styles=[];this.element=element;this.name=element&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(element.getId()||element.getNameAtt())||getNewName();if(this.name in CKEDITOR.instances)throw'[CKEDITOR.editor] The instance "'+this.name+'" already exists.';this.id=CKEDITOR.tools.getNextId();this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=
new CKEDITOR.focusManager(this);CKEDITOR.fire("instanceCreated",null,this);this.on("mode",updateCommands,null,null,1);this.on("readOnly",updateCommands,null,null,1);initConfig(this,instanceConfig)}})();
CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(commandName,commandDefinition){return this._.commands[commandName]=new CKEDITOR.command(this,commandDefinition)},addCss:function(css){this._.styles.push(css)},destroy:function(noUpdate){if(!noUpdate)this.updateElement();this.fire("destroy");this.theme&&this.theme.destroy(this);CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},execCommand:function(commandName,data){var command=this.getCommand(commandName);var eventData=
{name:commandName,commandData:data,command:command};if(command&&command.state!=CKEDITOR.TRISTATE_DISABLED)if(this.fire("beforeCommandExec",eventData)!==true){eventData.returnValue=command.exec(eventData.commandData);if(!command.async&&this.fire("afterCommandExec",eventData)!==true)return eventData.returnValue}return false},getCommand:function(commandName){return this._.commands[commandName]},getData:function(){this.fire("beforeGetData");var eventData=this._.data;if(typeof eventData!="string"){var element=
this.element;if(element&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE)eventData=element.is("textarea")?element.getValue():element.getHtml();else eventData=""}eventData={dataValue:eventData};this.fire("getData",eventData);return eventData.dataValue},getSnapshot:function(){var data=this.fire("getSnapshot");if(typeof data!="string"){var element=this.element;if(element&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE)data=element.is("textarea")?element.getValue():element.getHtml()}return data},loadSnapshot:function(snapshot){this.fire("loadSnapshot",
snapshot)},setData:function(data,callback,internal){if(callback)this.on("dataReady",function(evt){evt.removeListener();callback.call(evt.editor)});var eventData={dataValue:data};!internal&&this.fire("setData",eventData);this._.data=eventData.dataValue;!internal&&this.fire("afterSetData",eventData)},setReadOnly:function(isReadOnly){isReadOnly=isReadOnly==undefined||isReadOnly;if(this.readOnly!=isReadOnly){this.readOnly=isReadOnly;this.fire("readOnly")}},insertHtml:function(data){this.fire("insertHtml",
data)},insertText:function(text){this.fire("insertText",text)},insertElement:function(element){this.fire("insertElement",element)},checkDirty:function(){return this.mayBeDirty&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){if(this.mayBeDirty)this._.previousValue=this.getSnapshot()},updateElement:function(){var element=this.element;if(element&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){var data=this.getData();if(this.config.htmlEncodeOutput)data=CKEDITOR.tools.htmlEncode(data);
if(element.is("textarea"))element.setValue(data);else element.setHtml(data)}}});CKEDITOR.on("loaded",function(){var pending=CKEDITOR.editor._pending;if(pending){delete CKEDITOR.editor._pending;for(var i=0;i<pending.length;i++)pending[i]._init()}});