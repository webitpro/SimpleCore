(function(){window.CKFinder=function(f,g,h,i){var j=this;
j.BasePath=f||CKFinder.DEFAULT_BASEPATH;
j.Width=g||"100%";
j.Height=h||400;
j.SelectFunction=i||null;
j.SelectFunctionData=null;
j.SelectThumbnailFunction=i||null;
j.SelectThumbnailFunctionData=null;
j.DisableThumbnailSelection=false;
j.ClassName="CKFinderFrame";
j.StartupPath=null;
j.StartupFolderExpanded=false;
j.RememberLastFolder=true;
j.ResourceType=null;
j.Id=null;
j.Skin=null
};
CKFinder.DEFAULT_BASEPATH="/ckfinder/";
CKFinder.ConnectorLanguage="php";
CKFinder._={instanceConfig:[]};
(function(){function b(a){var d=1;
while(CKFinder._.instanceConfig[d]){d++
}CKFinder._.instanceConfig[d]=a;
return d
}CKFinder.prototype={Create:function(){document.write(this.CreateHtml())
},CreateHtml:function(){var f=this;
var a=f.ClassName;
if(a&&a.length>0){a=' class="'+a+'"'
}var e=f.Id;
if(e&&e.length>0){e=' id="'+e+'"'
}return'<iframe src="'+f._BuildUrl()+'" width="'+f.Width+'" height="'+f.Height+'"'+a+e+' frameborder="0" scrolling="no"></iframe>'
},Popup:function(a,j){a=a||"80%";
j=j||"70%";
if(typeof a=="string"&&a.length>1&&a.substr(a.length-1,1)=="%"){a=parseInt(window.screen.width*parseInt(a,10)/100,10)
}if(typeof j=="string"&&j.length>1&&j.substr(j.length-1,1)=="%"){j=parseInt(window.screen.height*parseInt(j,10)/100,10)
}if(a<200){a=200
}if(j<200){j=200
}var k=parseInt((window.screen.height-j)/2,10),l=parseInt((window.screen.width-a)/2,10),m="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+a+",height="+j+",top="+k+",left="+l,n=window.open("","CKFinderPopup",m,true);
if(!n){return false
}var o=this._BuildUrl().replace(/&amp;/g,"&");
try{n.moveTo(l,k);
n.resizeTo(a,j);
n.focus();
n.location.href=o
}catch(p){n=window.open(o,"CKFinderPopup",m,true)
}return true
},_BuildUrl:function(a){var h=this;
a=a||h.BasePath;
var f="";
if(!a||a.length===0){a=CKFinder.DEFAULT_BASEPATH
}if(a.substr(a.length-1,1)!="/"){a+="/"
}a+="ckfinder.html";
var g;
if(h.SelectFunction){g=h.SelectFunction;
if(typeof g=="function"){g=g.toString().match(/function ([^(]+)/)[1]
}f+="?action=js&amp;func="+g
}if(h.Skin){f+=f?"&amp;":"?";
f+="skin="+encodeURIComponent(h.Skin)
}if(h.SelectFunctionData){f+=f?"&amp;":"?";
f+="data="+encodeURIComponent(h.SelectFunctionData)
}if(h.ResourceType){f+=f?"&amp;":"?";
f+="type="+encodeURIComponent(h.ResourceType)
}if(h.DisableThumbnailSelection){f+=f?"&amp;":"?";
f+="dts=1"
}else{if(h.SelectThumbnailFunction||h.SelectFunction){g=h.SelectThumbnailFunction||h.SelectFunction;
if(typeof g=="function"){g=g.toString().match(/function ([^(]+)/)[1]
}f+=f?"&amp;":"?";
f+="thumbFunc="+g;
if(h.SelectThumbnailFunctionData){f+="&amp;tdata="+encodeURIComponent(h.SelectThumbnailFunctionData)
}else{if(!h.SelectThumbnailFunction&&h.SelectFunctionData){f+="&amp;tdata="+encodeURIComponent(h.SelectFunctionData)
}}}}if(h.StartupPath){f+=f?"&amp;":"?";
f+="start="+encodeURIComponent(h.StartupPath+(h.StartupFolderExpanded?":1":":0"))
}if(h.RememberLastFolder!==undefined&&!h.RememberLastFolder){f+=f?"&amp;":"?";
f+="rlf=0"
}if(h.Id){f+=f?"&amp;":"?";
f+="id="+encodeURIComponent(h.Id)
}return a+f
}};
CKFinder.Create=function(a,h,i,j){var k;
if(a!==null&&typeof a=="object"){k=new CKFinder();
for(var l in a){k[l]=a[l]
}}else{k=new CKFinder(a,h,i,j)
}k.Create()
};
CKFinder.Popup=function(a,i,j,k){var l,m;
if(a!==null&&typeof a=="object"){m=b(a);
l=new CKFinder();
for(var n in a){l[n]=a[n]
}}else{l=new CKFinder(a,i,j,k)
}l.Popup(i,j)
};
CKFinder.SetupFCKeditor=function(a,n,o,p){var q,r;
if(n!==null&&typeof n=="object"){r=b(n);
q=new CKFinder();
for(var s in n){q[s]=n[s];
if(s=="Width"){var t=q[s]||800;
if(typeof t=="string"&&t.length>1&&t.substr(t.length-1,1)=="%"){t=parseInt(window.screen.width*parseInt(t,10)/100,10)
}a.Config.LinkBrowserWindowWidth=t;
a.Config.ImageBrowserWindowWidth=t;
a.Config.FlashBrowserWindowWidth=t
}else{if(s=="Height"){var u=q[s]||600;
if(typeof u=="string"&&u.length>1&&u.substr(u.length-1,1)=="%"){u=parseInt(window.screen.height*parseInt(u,10)/100,10)
}a.Config.LinkBrowserWindowHeight=u;
a.Config.ImageBrowserWindowHeight=u;
a.Config.FlashBrowserWindowHeight=u
}}}}else{q=new CKFinder(n)
}var v=q.BasePath;
if(v.substr(0,1)!="/"&&v.indexOf("://")==-1){v=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+v
}v=q._BuildUrl(v);
var w=v.indexOf("?")!==-1?"&":"?";
if(r){v+=w+"configId="+r;
w="&"
}a.Config.LinkBrowserURL=v;
a.Config.ImageBrowserURL=v+w+"type="+(o||"Images");
a.Config.FlashBrowserURL=v+w+"type="+(p||"Flash");
var x=v.substring(0,1+v.lastIndexOf("/"));
a.Config.LinkUploadURL=x+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type=Files";
a.Config.ImageUploadURL=x+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(o||"Images");
a.Config.FlashUploadURL=x+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(p||"Flash")
};
CKFinder.SetupCKEditor=function(a,o,p,q){if(a===null){for(var r in CKEDITOR.instances){CKFinder.SetupCKEditor(CKEDITOR.instances[r],o,p,q)
}CKEDITOR.on("instanceCreated",function(c){CKFinder.SetupCKEditor(c.editor,o,p,q)
});
return
}var s,t;
if(o!==null&&typeof o=="object"){t=b(o);
s=new CKFinder();
for(var u in o){s[u]=o[u];
if(u=="Width"){var v=s[u]||800;
if(typeof v=="string"&&v.length>1&&v.substr(v.length-1,1)=="%"){v=parseInt(window.screen.width*parseInt(v,10)/100,10)
}a.config.filebrowserWindowWidth=v
}else{if(u=="Height"){var w=s[u]||600;
if(typeof w=="string"&&w.length>1&&w.substr(w.length-1,1)=="%"){w=parseInt(window.screen.height*parseInt(w,10)/100,10)
}a.config.filebrowserWindowHeight=w
}}}}else{s=new CKFinder(o)
}var x=s.BasePath;
if(x.substr(0,1)!="/"&&x.indexOf("://")==-1){x=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+x
}x=s._BuildUrl(x);
var y=x.indexOf("?")!==-1?"&":"?";
if(t){x+=y+"configId="+t;
y="&"
}a.config.filebrowserBrowseUrl=x;
a.config.filebrowserImageBrowseUrl=x+y+"type="+(p||"Images");
a.config.filebrowserFlashBrowseUrl=x+y+"type="+(q||"Flash");
var z=x.substring(0,1+x.lastIndexOf("/"));
a.config.filebrowserUploadUrl=z+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type=Files";
a.config.filebrowserImageUploadUrl=z+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(p||"Images");
a.config.filebrowserFlashUploadUrl=z+"core/connector/"+CKFinder.ConnectorLanguage+"/connector."+CKFinder.ConnectorLanguage+"?command=QuickUpload&type="+(q||"Flash")
}
})()
})();